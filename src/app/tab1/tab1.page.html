<!-- <ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Tab 1
    </ion-title>
  </ion-toolbar>
</ion-header> -->

<ion-content class="pagesBackground">
  
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>



  <div *ngIf="user=='document' || user=='transportation'">
    <div>
      <ion-title size="large" class="homeTitle">الـبــــريــــــد</ion-title>
  
    </div>
  
    <!-- <app-explore-container name="Tab 1 page"></app-explore-container> -->
    <div class="correspondencesTable" color="tertiary">
      <table border="2" class="table">
        <tr class="mainRow">
          <td> م </td>
          <td> رقم البريد </td>
          <td> الجهة </td>
          <td> الموقع </td>
          <td> مرسلة إلى </td>
          <!-- <td> درجة السرية </td> -->
          <!-- <td> درجة الأولوية </td> -->
          <!-- <td> طريقة التوصيل </td> -->
          <!-- <td> معد الصادر </td> -->
          <td> اسم السائق </td>
          <td> رقم هاتف السائق </td>
          <!-- <td> ملاحظات </td> -->
          <!-- <td> موقع التسليم </td>
          <td> اسم المستلم </td>
          <td> توقيع المستلم </td> -->
          <td> الوقت / التاريخ </td>
          <td> الحالة </td>
        </tr>

       
        <tr *ngFor="let i of deliveries.pageResult ; let num = index" class="custom-bg" >
          <td>{{num + 1}}</td>
          <td>
            <ion-button (click)="gotoDetails(i)"  fill="clear" >
              <u>
                {{i.CorrespondenceNumber}}
              </u>
            </ion-button>
          </td>

          <td>{{i.organizationName}}</td>
          <td>{{i.OfficeSite}}</td>
          <td>{{i.SendTo}}</td>
          <!-- <td>{{i.ConfidLevel}}</td> -->
          <!-- <td>{{i.PriorityLevel}}</td> -->
          <!-- <td>{{i.DeliveryMethod}}</td> -->
          <!-- <td>{{i.OutboundSender}}</td> -->
          <td>{{i.driverName}}</td>
          <td>{{i.driverPhone}}</td>
          <!-- <td>{{i.Notes}}</td> -->
          <!-- <td>{{i.DeliveryCoordinates}}</td> -->
          <!-- <td>{{i.ReceipientName}}</td> -->
          <!-- <td>{{i.ReciepientSignature}}</td> -->
          <td>{{i.CurrentDateTime}}</td>
          <!-- <td>{{i.CurrentStatus}}</td> -->
          <td *ngIf="i.CurrentStatus==2803" style="color:rgb(55, 91, 252);">{{i.StatusType}}</td>
          <td *ngIf="i.CurrentStatus==2804" style="color:rgb(145, 145, 7) ;">{{i.StatusType}}</td>
          <td *ngIf="i.CurrentStatus==2805" style="color:rgb(38, 163, 55);">{{i.StatusType}}</td>
          <td *ngIf="i.CurrentStatus==2806" style="color:rgb(190, 48, 48) ;">{{i.StatusType}}</td>
          <td *ngIf="i.CurrentStatus==2807" style="color:rgb(63, 63, 63) ;">{{i.StatusType}}</td>
        </tr>
      
      
      </table>
      <ion-row>
        <ion-col size="12" class="ion-text-center" dir="rtl">
          {{page+1}} من {{deliveries.totalPages}}
        </ion-col>
      </ion-row>

      <ion-row dir="rtl">
        <ion-col size="2">
          <ion-button fill="clear" (click)="goFirst()">
            <ion-icon name="play-forward" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="2">
          <ion-button fill="clear" (click)="prevPage()">
            <ion-icon name="chevron-back" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="4" class="ion-text-center">
          <ion-select interface="action-sheet" [(ngModel)]="resultsCount" (ionChange)="getAllDeliveries()">
            <ion-select-option value="5">5</ion-select-option>
            <ion-select-option value="10">10</ion-select-option>
            <ion-select-option value="25">25</ion-select-option>
            <ion-select-option value="50">50</ion-select-option>
          </ion-select>
          <!-- <ion-list class="select">
            <ion-item>

            </ion-item>
          </ion-list> -->

        </ion-col>

        <ion-col size="2">
          <ion-button fill="clear" (click)="nextPage()">
            <ion-icon name="chevron-forward" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
        <ion-col size="2">
          <ion-button fill="clear" (click)="goLast()">
            <ion-icon name="play-back" slot="icon-only"></ion-icon>
          </ion-button>
        </ion-col>
      </ion-row>
    </div>
  </div> 

<!-- 
    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="records">
    
         Po+
         *-sition Column -->
        <!-- <ng-container matColumnDef="م">
          <th mat-header-cell *matHeaderCellDef> م </th>
          <td mat-cell *matCellDef="let element"> {{element.lenght}} </td>
        </ng-container> -->
    
        <!-- Name Column -->
        <!-- <ng-container matColumnDef="رقم البريد">
          <th mat-header-cell *matHeaderCellDef> رقم البريد </th>
          <td mat-cell *matCellDef="let element"> {{element.CorrespondenceNumber}} </td>
        </ng-container> -->
    
        <!-- Weight Column -->
        <!-- <ng-container matColumnDef="weight">
          <th mat-header-cell *matHeaderCellDef> Weight </th>
          <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
        </ng-container> -->
    
        <!-- Symbol Column -->
        <!-- <ng-container matColumnDef="symbol">
          <th mat-header-cell *matHeaderCellDef> Symbol </th>
          <td mat-cell *matCellDef="let element"> {{element.symbol}} </td>
        </ng-container> -->

 <!--   
       <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    
      <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                     showFirstLastButtons 
                     aria-label="Select page of periodic elements">
      </mat-paginator>
    </div> -->
    <!-- <pagination-controls (pageChange)="p = $event" ></pagination-controls> -->
    <!-- <jw-pagination [items]="deliveries" (changePage)="onChangePage($event)"  [pageSize]="10"></jw-pagination> -->
 
 
  <div *ngIf="user=='driver'" class="correspondencesTable">
    <div>
      <ion-title size="large" class="homeTitle">الـبــــريــــــد</ion-title>
  
    </div>

    <ion-row style="width: 100%;">
      <ion-col size="1" class="feilds">السائق:</ion-col>
      <ion-col size="4.5">
        <!-- <ion-label class="feilds">السائق:</ion-label> -->
        <ion-input type="text" class="generalInput">{{driverName}}</ion-input>
      </ion-col>
         <ion-col size="1" class="feilds">التاريخ:</ion-col>
      <ion-col size="4">
        <ion-input type="text" class="generalInput">{{date}}</ion-input>
      </ion-col>
      <ion-col size="1" style="padding-top: 25px;">
        <ion-button (click)="readyToGo()" [disabled]="readyToGoButton==true">
          جاهز للتوصيل
        </ion-button>
      </ion-col>
    </ion-row>
    <!-- <ion-row>
      <ion-col size="1" class="feilds">الموقع:</ion-col>
      <ion-col size="5">
        <ion-input type="text" class="generalInput"></ion-input>
      </ion-col>
          <ion-col size="1" class="feilds">اليوم:</ion-col>
      <ion-col size="5">
        <ion-input type="text" class="generalInput"></ion-input>
      </ion-col>
    </ion-row> -->



    <table class="table" border="2">
      <tr class="mainRow">
        <td>م</td>
        <td>اختر</td>
        <td>رقم البريد</td>
        <td>الجهة</td>
        <td>الموقع</td>
        <td>مرسلة إلى</td>
        <!-- <td>درجة السرية</td> -->
        <!-- <td>درجة الأولوية</td> -->
        <!-- <td>طريقة التوصيل</td> -->
        <td>الوقت</td>
        <td>الحالة</td>
        <td>الملاحظات</td>
        <td>الإجراءات</td>
      </tr>
      <tr *ngFor="let i of deliveryByDriver; let num = index" class="custom-bg">
        <td>{{num + 1}}</td>
        <td>
          <ion-checkbox class="checkbox" slot="end" [(ngModel)]="i.isChecked" (ionChange)="onChange(i, $event.target.checked)"></ion-checkbox>
        </td>
        <td>{{i.CorrespondenceNumber}}</td>
        <td>{{i.organizationName}}</td>
        <td>{{i.OfficeSite}}</td>
        <td>{{i.SendTo}}</td>
        <!-- <td>{{i.ConfidLevel}}</td> -->
        <!-- <td>{{i.PriorityLevel}}</td> -->
        <!-- <td>{{i.DeliveryMethod}}</td> -->
        <td>{{i.CurrentDateTime}}</td>
        <td>{{i.CurrentStatus}}</td>
        <td>{{i.CurrentNote}}</td>
        <td >
          <ion-buttons >
            <div class="tooltip">
              <ion-button (click)="goToRecipientDetails(i)" [disabled]="enableButtons == false">
                <ion-icon name="paper-plane-outline"></ion-icon>
              </ion-button>
              <span class="tooltiptext">المستلم</span>
            </div>
            
            <div class="tooltip">
              <ion-button (click)="returnBack(i)" [disabled]="enableButtons == false">
                <!-- <ion-icon md="md-return-left"></ion-icon> -->
                <ion-icon name="arrow-back-outline" ></ion-icon>
              </ion-button>
              <span class="tooltiptext">إسترجاع</span>
            </div>
            
          </ion-buttons>
        </td>

        <!-- <td style="background-color: white;">
          <ion-buttons >
            <ion-button (click)="goToRecipientDetails(i)" [disabled]="enableButtons==false" style="background-color: cadetblue;">
              المستلم
            </ion-button>
            <ion-button (click)="returnBack(i.Id)" [disabled]="enableButtons==false" style="background-color: rgb(156, 14, 14);">
              إرجاع
            </ion-button>
        
          </ion-buttons>
        </td> -->
      </tr>
    </table>
<br/><br/>
    <div class="tooltip">
      <ion-button (click)="goToRecipientDetails1()" [disabled]="enableButtons==false">
        <ion-icon name="paper-plane-outline"></ion-icon>
      </ion-button>
      <span class="tooltiptext">المستلم لأكثر من بريد واحد</span>
    </div>

  </div>

  <div *ngIf="user=='admin'">

    <div>
      <ion-title size="large" class="homeTitle">إدارة المستخدمين</ion-title>
    </div>
    <div class="correspondencesTable">
      <ion-button (click)="showNewUserModal()" class="showModal">
        <ion-icon slot="icon-only" name="add"></ion-icon>
      </ion-button>
      <table border="2" class="table">
        <tr class="mainRow" color="primary">
          <td>م</td>
          <td>اسم المستخدم</td>
          <td>الاسم</td>
          <td>المسمى الوظيفي</td>
          <td>الدائرة</td>
          <td>نوع المستخدم</td>
          <td>رقم الهاتف</td>
          
          <td>الإجراءات</td>
        </tr>
        <tr *ngFor="let item of users; let num = index" class="custom-bg">
          <td>{{num + 1}}</td>
          <td>{{item.UserName}}</td>
          <td>
            {{item.FullName}}
            <!-- <ion-button (click)="addUser(item)" fill="clear" shape="round">
            {{item.data.fullname}}
          </ion-button> -->
            </td>
          <td>{{item.Position}}</td>
          <td>{{item.Department}}</td>
          <td>{{item.UserType}}</td>
          <td>{{item.Phone}}</td>
          <td >
            <ion-buttons >
              <div class="tooltip">
                <ion-button (click)="updateUserDetails(item)">
                  <ion-icon name="create" placeholder="edit"></ion-icon>
                </ion-button>
                <span class="tooltiptext">تعديل</span>
              </div>
              
              <div class="tooltip" >
                <ion-button (click)="presentAlertConfirm(item.Id)" [disabled]="item.UserName == 'admin'">
                  <ion-icon name="trash"></ion-icon>
                </ion-button>
                <span class="tooltiptext">حذف</span>
              </div>
              
            </ion-buttons>
          </td>

        </tr>
      </table>
    </div>
  </div>
</ion-content>
